const docReady=()=>{getScale(document.getElementById("keySelect"),document.getElementById("modeSelect"),document.getElementById("tuningSelect"))};$(document).on({ajaxStart:()=>{$("#loading").fadeIn("fast")},ajaxStop:()=>{$("#loading").fadeOut("fast")}});let show_notes=!0,show_frets=!0,chordBody,thisIsAMode=!1;const show_frets_notes=showThis=>{const fret_notes=$(".fretNote"),fret_nums=$(".fret-num");switch(showThis){case"show-notes":if(!0===show_notes)for(ii=0;ii<fret_notes.length;ii++)$(fret_notes[ii]).css("visibility","hidden"),show_notes=!1;else for(ii=0;ii<fret_notes.length;ii++)$(fret_notes[ii]).css("visibility","visible"),show_notes=!0;break;case"show-frets":if(!0===show_frets)for(ii=0;ii<fret_nums.length;ii++)$(fret_nums[ii]).css("visibility","hidden"),show_frets=!1;else for(ii=0;ii<fret_nums.length;ii++)$(fret_nums[ii]).css("visibility","visible"),show_frets=!0}};$(".button").click((function(){show_frets_notes(this.id)}));const clearBoard=()=>{const finger=$(".finger"),finger0=$(".finger0");for(let ii=0;ii<finger.length;ii++)$(finger[ii]).css("visibility","hidden"),$(finger[ii]).children(1).css("display","none"),$(finger[ii]).css("backgroundColor","darkgreen");for(let ii=0;ii<finger0.length;ii++)$(finger0[ii]).css("visibility","hidden"),$(finger0[ii]).css("backgroundColor","darkgreen");return!0},changeFingerboard=wood=>{const dots=$(".dots"),necks=$(".neck");if("maple"!==wood.value)if("rosewood"!==wood.value){if("ebony"===wood.value){for(ii=0;ii<dots.length;ii++)$(dots[ii]).css("backgroundColor","#cccccc");for(ii=0;ii<necks.length;ii++)$(necks[ii]).css("backgroundColor","#160b03");$("#fretNut").css("borderColor","#FAEBD7")}}else{for(ii=0;ii<dots.length;ii++)$(dots[ii]).css("backgroundColor","#cccccc");for(ii=0;ii<necks.length;ii++)$(necks[ii]).css("backgroundColor","#460e00");$("#fretNut").css("borderColor","#FAEBD7")}else{for(ii=0;ii<dots.length;ii++)$(dots[ii]).css("backgroundColor","#333");for(ii=0;ii<necks.length;ii++)$(necks[ii]).css("backgroundColor","#ffe5cc");$("#fretNut").css("borderColor","#000")}},getScale=(keyV,modeV,tuningV)=>{const key=keyV.value,tuning=tuningV.value;let mode="Major",scaleMode=modeV[modeV.selectedIndex].id,majorScale,scale;switch(thisIsAMode=!1,key){case"Db":$("#Natural_Minor").attr("disabled","disabled"),$("#Harmonic_Minor").attr("disabled","disabled"),$("#Melodic_Minor").attr("disabled","disabled"),7!==$("#modeSelect").prop("selectedIndex")&&8!==$("#modeSelect").prop("selectedIndex")&&9!==$("#modeSelect").prop("selectedIndex")||($("#modeSelect").prop("selectedIndex",0),scaleMode="Major");break;default:$("#Natural_Minor").removeAttr("disabled").html("Natural Minor").css("font-size",""),$("#Harmonic_Minor").removeAttr("disabled").html("Harmonic Minor").css("font-size",""),$("#Melodic_Minor").removeAttr("disabled").html("Melodic Minor").css("font-size","")}switch(scaleMode){case"Natural_Minor":mode="Natural_Minor";break;case"Harmonic_Minor":mode="Harmonic_Minor";break;case"Melodic_Minor":mode="Melodic_Minor";break;case"Minor_Pentatonic":mode="Minor_Pentatonic";break;case"Blues":mode="Blues";break;case"Dorian":case"Phrygian":case"Lydian":case"Mixolydian":case"Aeolian":case"Locrian":mode="Major",thisIsAMode=!0}$.post(`get_scale.php?key=${key.replace("#","sharp")}&mode=Major`,(data,status)=>{"success"===status&&(majorScale=JSON.parse(data),"Major"===scaleMode&&(scale=majorScale,displayScale(majorScale,scale,scaleMode,tuning)),"Major"!==scaleMode&&$.post(`get_scale.php?key=${key.replace("#","sharp")}&mode=${mode}`,(data,status)=>{scale=JSON.parse(data),displayScale(majorScale,scale,scaleMode,tuning)}))})},displayScale=(majorScale,scale,scaleMode,tuning)=>{$("#loading").show(),clearBoard();let fretShift=0,noteShift=0,E2,A,D,G,B,E,ii,chords=MajorChords;switch(tuning){case"standardE":E2=Estring,A=Astring,D=Dstring,G=Gstring,B=Bstring,E=Estring;break;case"dropD":E2=Dstring,A=Astring,D=Dstring,G=Gstring,B=Bstring,E=Estring;break;case"openD":E2=Dstring,A=Astring,D=Dstring,G=fSharpString,B=Astring,E=Dstring;break;case"dropC":E2=Cstring,A=Gstring,D=Cstring,G=Fstring,B=Astring,E=Dstring;break;case"DADGAD":E2=Dstring,A=Astring,D=Dstring,G=Gstring,B=Astring,E=Dstring}switch(scaleMode){case"Natural_Minor":chords=NaturalMinorChords;break;case"Harmonic_Minor":chords=HarmonicMinorChords;break;case"Melodic_Minor":chords=MelodicMinorChords;break;case"Minor_Pentatonic":chords=MinorPentatonicChords;break;case"Blues":chords=BluesChords;break;case"Dorian":fretShift=1,noteShift=1;break;case"Phrygian":fretShift=2,noteShift=2;break;case"Lydian":fretShift=3,noteShift=3;break;case"Mixolydian":fretShift=4,noteShift=4;break;case"Aeolian":fretShift=5,noteShift=5;break;case"Locrian":fretShift=6,noteShift=6}$("#Dorian").html(`${majorScale[1]} Dorian`),$("#Phrygian").html(`${majorScale[2]} Phrygian`),$("#Lydian").html(`${majorScale[3]} Lydian`),$("#Mixolydian").html(`${majorScale[4]} Mixolydian`),$("#Aeolian").html(`${majorScale[5]} Aeolian`),$("#Locrian").html(`${majorScale[6]} Locrian`),$("#scaleTitle").html(`${scale[noteShift]} ${scaleMode.replace("_"," ")}`),$("#notes").html("");for(let fretNum=0;fretNum<25;fretNum++){$("#fret"+fretNum).css("backgroundColor",""),fretNum<scale.length+1&&(0===fretNum?$("#notes").append(`<span class="rootNote">${scale[fretNum+noteShift]}</span>&nbsp;`):fretNum>0&&fretNum<scale.length?(fretNum+noteShift>=scale.length&&(noteShift-=scale.length),$("#notes").append(`${scale[fretNum+noteShift]}&nbsp;`)):fretNum===scale.length&&fretNum+noteShift>=scale.length&&(noteShift-=scale.length));for(let scaleNote=0;scaleNote<scale.length;scaleNote++)for(ii=0;ii<3;ii++)E[fretNum][ii]===scale[scaleNote]&&($("#E1F"+fretNum).css("visibility","visible"),$("#E1F"+fretNum).children(1).css("display","inline"),$("#E1F"+fretNum).children(1).html(scale[scaleNote]),E[fretNum][ii]===scale[0+fretShift]&&$("#E1F"+fretNum).css("backgroundColor","#005bb1")),B[fretNum][ii]===scale[scaleNote]&&($("#BF"+fretNum).css("visibility","visible"),$("#BF"+fretNum).children(1).css("display","inline"),$("#BF"+fretNum).children(1).html(scale[scaleNote]),B[fretNum][ii]===scale[0+fretShift]&&$("#BF"+fretNum).css("backgroundColor","#005bb1")),G[fretNum][ii]===scale[scaleNote]&&($("#GF"+fretNum).css("visibility","visible"),$("#GF"+fretNum).children(1).css("display","inline"),$("#GF"+fretNum).children(1).html(scale[scaleNote]),G[fretNum][ii]===scale[0+fretShift]&&$("#GF"+fretNum).css("backgroundColor","#005bb1")),D[fretNum][ii]===scale[scaleNote]&&($("#DF"+fretNum).css("visibility","visible"),$("#DF"+fretNum).children(1).css("display","inline"),$("#DF"+fretNum).children(1).html(scale[scaleNote]),D[fretNum][ii]===scale[0+fretShift]&&$("#DF"+fretNum).css("backgroundColor","#005bb1")),A[fretNum][ii]===scale[scaleNote]&&($("#AF"+fretNum).css("visibility","visible"),$("#AF"+fretNum).children(1).css("display","inline"),$("#AF"+fretNum).children(1).html(scale[scaleNote]),A[fretNum][ii]===scale[0+fretShift]&&$("#AF"+fretNum).css("backgroundColor","#005bb1")),E2[fretNum][ii]===scale[scaleNote]&&($("#E2F"+fretNum).css("visibility","visible"),$("#E2F"+fretNum).children(1).css("display","inline"),$("#E2F"+fretNum).children(1).html(scale[scaleNote]),E2[fretNum][ii]===scale[0+fretShift]&&$("#E2F"+fretNum).css("backgroundColor","#005bb1"))}if(!0===thisIsAMode&&$("#scaleTitle").append(` '${scale[0]}'`),"standardE"===tuning&&$("#notes").append(' "Standard E"'),"dropD"===tuning&&$("#notes").append(' "Drop D"'),"openD"===tuning&&$("#notes").append(' "Open D"'),"dropC"===tuning&&$("#notes").append(' "Drop C"'),"DADGAD"===tuning&&$("#notes").append(' "DADGAD"'),"Blues"===scaleMode)$("#chords-body").html("CHORDS COMING SOON");else{for($("#chords-body").html(""),ii=0;ii<chords.length;ii++){const folder=scale[ii];$("#chords-body").append(`<div id="chord${ii}" class="chord-container" data-key="${scale[ii]}" data-mode="${chords[ii]}"></div>`),$("#chord"+ii).append(`<h2>${scale[ii]} ${chords[ii]}</h2>`),$("#chord"+ii).append('<img class="chord-image" src="images/Chords/'+folder.replace("#","sharp").replace("b","flat")+"/"+chords[ii]+"/"+scale[ii].replace("#","sharp").replace("b","flat")+"_"+chords[ii].replace("#","sharp").replace("b","flat")+'1.png">')}$(".chord-container").bind("click",chord_click),$("#more-chords-close").click(()=>{$("#more-chords").hide(),$(".chord-container").bind("click",chord_click),$(".chord-container").css("opacity","1")})}$("#neck-container").clone().appendTo("#neckClone")};function chord_click(){const key=this.dataset.key,mode=this.dataset.mode,keyText=key.replace("-"," / "+key.substr(0,key.indexOf("P")));$("#more-chords-body").html(""),$("#more-chords").show(),$(".chord-container").unbind("click").css("opacity","0.4"),$("#more-chords-header").html(keyText+" "+mode),$.get("get_files.php?key="+key.replace("#","sharp").replace("b","flat")+"&mode="+mode,data=>{$("#more-chords-body").html("");for(let ii=0;ii<data;ii++)$("#more-chords-body").append('<div class="more-chord-container"><img id="'+key.replace("#","sharp").replace("b","flat")+ii+'" class="chord-image more-chord-image" src="images/Chords/'+key.replace("#","sharp").replace("b","flat")+"/"+mode+"/"+key.replace("#","sharp").replace("b","flat")+"_"+mode+(ii+1)+'.png" onclick="javascript:zoom(this)"></div>')})}const zoom=img=>{$("#chord-zoom-image").attr("src",img.src),$("#more-chords").hide(),$("#chords-zoom").show()};$("#chords-zoom").click((function(){$(this).hide(),$("#more-chords").show()}));